var Search = function(database){
	var db = database,
		Step = require('step');

	var _searchAll = function(query, property, callback){
		var error;

		Step(
			function runSearches(){
				console.log("property: " + property);
				console.log("query: " + query);
				// db.queryNodeIndex('node_auto_index', query, this);
				db.getIndexedNodes('node_auto_index', property, query, this );
			},
			function searchResults(err, results){
				error = err;
				callback(error, results);
			}
		);
	};

	return {
		searchAll: _searchAll
	};

};

module.exports = Search;